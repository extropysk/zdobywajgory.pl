(this.webpackJsonpkd=this.webpackJsonpkd||[]).push([[10],{503:function(e,t,a){"use strict";a(2);var n=a(170),i=a.n(n),r=a(505),s=a.n(r),l=a(7),c=a(0);t.a=Object(l.withStyles)((function(e){return{formControl:{margin:e.spacing.unit,width:160}}}))((function(e){return Object(c.jsxs)(i.a,{onClose:e.onClose,"aria-labelledby":"simple-dialog-title",open:e.isOpen,fullWidth:!0,children:[Object(c.jsx)(s.a,{id:"simple-dialog-title",children:e.title}),e.children]})}))},507:function(e,t,a){"use strict";var n=a(3),i=a.n(n),r=a(6),s=a(19),l=a(20),c=a(21),o=a(22),d=a(4),u=a(2),h=a.n(u),p=a(7),m=a(169),g=a(512),j=a.n(g),b=a(70),f=a.n(b),x=a(69),O=a.n(x),v=a(511),C=a.n(v),k=a(0);var y=Object(p.withStyles)((function(e){return{}}))((function(e){var t=e.color,a=e.onClick,n=e.tooltip,i=e.disabled,r=e.className;return Object(k.jsx)(C.a,{title:n,children:Object(k.jsx)(O.a,{color:t,onClick:a,"aria-label":n,disabled:i,className:r,children:e.children})})})),w=a(96),_=a(12),S=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onChange=function(){var e=Object(r.a)(i.a.mark((function e(t){var a,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=t.target.files[0],n.filePath=URL.createObjectURL(a),t.target.value="","image/jpeg"!==n.props.mimeType){e.next=10;break}return r=window.URL||window.webkitURL,s=r.createObjectURL(a),e.next=9,n.props.utils.resize(s,n.props.height,a.name);case 9:a=e.sent;case 10:n.props.onChange(n.props.field,a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onClick=function(){n.props.disabled||n.inputRef.current.click()},n.inputRef=h.a.createRef(),n.filePath="",n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.value,n=e.disabled,i=e.mimeType,r=e.field,s=e.translate,l=this.props.label||s("field."+r);return Object(k.jsxs)("div",{children:[Object(k.jsx)(y,{className:t.button,tooltip:Object(k.jsx)("img",{src:null!==a&&""===this.filePath?a:this.filePath,alt:"Attach file",className:t.tooltip}),color:a?"primary":"default",onClick:this.onClick,disabled:n,children:Object(k.jsx)(j.a,{})}),Object(k.jsx)(f.a,{htmlFor:r,children:l}),Object(k.jsx)("input",{ref:this.inputRef,style:{display:"none"},type:"file",accept:i,onChange:this.onChange})]})}}]),a}(h.a.Component);t.a=Object(_.b)(Object(w.a)(Object(p.withStyles)((function(e){return Object(d.a)(Object(d.a)({},Object(m.a)(e)),{},{button:{margin:e.spacing.unit},tooltip:{"max-width":"150px","max-height":"150px"}})}))(S)))},513:function(e,t,a){"use strict";var n=a(15),i=a(3),r=a.n(i),s=a(4),l=a(521),c=a(526),o=a(2),d=a.n(o),u=a(509),h=a.n(u),p=a(172),m=a(7),g=a(146),j=a.n(g),b=a(69),f=a.n(b),x=a(169),O=a(96),v=(a(522),a(6)),C=a(523),k=a.n(C),y=a(524),w=a.n(y),_=a(0),S=function(e,t,a,n,i){return{name:"Custom command",icon:function(){return Object(_.jsx)("img",{src:t,alt:"Custom command",className:e,onClick:function(e){return a(e,i)}})},execute:function(e){n(e)}}},F=function(e){var t=d.a.createRef(),a=null,n=function(){var t=Object(v.a)(r.a.mark((function t(n){var i,s,l,c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),i=n.target.files[0],n.target.value="",s=window.URL||window.webkitURL,l=s.createObjectURL(i),t.next=7,e.utils.resize(l,e.height,"img.jpg");case 7:return c=t.sent,t.prev=8,t.next=11,e.postFile(c);case 11:o=t.sent,a.textApi.replaceSelection('<img src="{URL}/api/file/'.concat(o._id,'" alt="img" style="max-height:480px;" />')),t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(8),console.log(t.t0),t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t,null,[[8,15]])})));return function(e){return t.apply(this,arguments)}}();return{name:"Custom command",icon:function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(k.a,{}),Object(_.jsx)("input",{ref:t,style:{display:"none"},type:"file",accept:"image/jpeg",onChange:n})]})},execute:function(e){!function(e){t.current.click(),a=e}(e)}}};var R=function(e,t,a){var n=e.classes;return{commands:{Emojis:S(n.emojiSize,"/img/emojis/nerd.png",t,a,"Emojis"),Marks:S(n.markSize,"/img/marks/mark black.png",t,a,"Marks"),UploadFile:F(e),Center:{name:"Custom command",icon:function(){return Object(_.jsx)(w.a,{})},execute:function(e){e.textApi.replaceSelection('<div class="center"></div>')}}},toolbarCommands:["Emojis","Marks","UploadFile","Center"]}},N=null,D="",T=["Asset 4.svg","camera.png","compas.svg","fist.png","hi.png","medal.png","metal.png","nerd.png","rocks.svg","sadman.png","crossroad.svg","mountain.png","rocks.svg","nerd.png","tree.png","triangel.svg","triangle.png"],U=["mark black.png","mark blue.png","mark brown.png","mark green.png","mark red.png","mark yellow.png"],z=function(e){N=e},E=function(){var e={data:[]},t=""!==D?"Emojis"===D?{path:"/img/emojis/",data:T,className:"emoji"}:"Marks"===D?{path:"/img/marks/",data:U,className:"emoji"}:e:e;return t.data.map((function(e){return Object(_.jsx)(f.a,{onClick:function(a){N&&N.textApi.replaceSelection('<img src="'.concat(t.path+e,'" alt="Custom command" className="').concat(t.className,'" />'))},style:{backgroundColor:"transparent"},children:Object(_.jsx)("img",{src:t.path+e,alt:"Custom command",className:t.className})})}))};t.a=Object(m.withStyles)((function(e){return Object(s.a)(Object(s.a)({},Object(x.a)(e)),{},{typography:{padding:e.spacing.unit/2},markSize:{width:"30px",height:"20px"},emojiSize:{width:"20px",height:"20px"},tooltip:{"max-width":"150px","max-height":"150px"}})}))(Object(O.a)((function(e){var t=function(){var t=Object(c.a)(r.a.mark((function t(a){var n,i,s,c,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Blob([a],{type:"image/jpeg"}),i=window.URL||window.webkitURL,s=i.createObjectURL(n),t.next=5,Object(l.a)(e.utils.resize(s,e.height,"img.jpg"));case 5:return c=t.sent,t.prev=6,t.next=9,Object(l.a)(e.postFile(c));case 9:return o=t.sent,t.next=12,"{URL}/api/file/".concat(o._id);case 12:return t.abrupt("return",!0);case 15:return t.prev=15,t.t0=t.catch(6),console.log(t.t0),t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t,null,[[6,15]])})));return function(e){return t.apply(this,arguments)}}(),a=d.a.useState("write"),i=Object(n.a)(a,2),s=i[0],o=i[1],m=d.a.useState(null),g=Object(n.a)(m,2),b=g[0],f=g[1],x=Boolean(b),O=x?"simple-popover":void 0,v=R(e,(function(e,t){f(e.currentTarget),D=t}),z),C=Object(u.getDefaultToolbarCommands)();return C.push(v.toolbarCommands),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(h.a,{commands:v.commands,toolbarCommands:C,value:e.value,onChange:function(t){return e.onChange(e.field,t)},selectedTab:s,readOnly:e.disabled,onTabChange:o,generateMarkdownPreview:function(e){return Promise.resolve(Object(_.jsx)(p.a,{children:e}))},paste:e.postFile?{saveImage:t}:null}),Object(_.jsx)(j.a,{id:O,open:x,anchorEl:b,onClose:function(){f(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:E()})]})})))},527:function(e,t,a){"use strict";var n=a(3),i=a.n(n),r=a(6),s=a(8),l=a(19),c=a(20),o=a(21),d=a(22),u=a(4),h=a(2),p=a.n(h),m=a(7),g=a(504),j=a(171),b=a(115),f=a(528),x=a(507),O=a(508),v=a(169),C=a(10),k=a(5),y=a.n(k),w=a(513),_=a(1),S=a.n(_),F=a(17),R=a(28),N=a(31),D=a(9),T=a(0),U={name:"",description:"",summitsRef:[],packsRef:[],serieRef:null,medalRef:null,difficulty:1,start:new Date,end:new Date,regStart:new Date,regEnd:new Date,key:0,_img:null,_imgDesktop:null,_thumbnail:null,_map:null,_logo:null,_badge:null,_mapDark:null,_mapFull:null,_mapFullTransparent:null,_logoDark:null,_medalFront:null,_medalBack:null},z=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleChangeFile=function(e,t){var a;n.setState((a={},Object(s.a)(a,e,t),Object(s.a)(a,e+"Changed",!0),a))},n.handleChange=function(e,t){n.setState(Object(s.a)({},e,t))},n.handleChangeSummitsRef=function(e,t){var a=t.map((function(e){return{id:e}}));n.setState(Object(s.a)({},e,a))},n.handleChangePacksRef=function(e,t){var a=t.map((function(e){return{id:e}}));n.setState(Object(s.a)({},e,a))},n.handleChangeRef=function(e,t){n.setState(Object(s.a)({},e,{id:t}))},n.handleSubmit=Object(r.a)(i.a.mark((function e(){var t,a,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.doby,a=t.addChallenge,r=t.refreshChallenges,s=t.editChallenge,e.prev=1,!n.state._id){e.next=7;break}return e.next=5,s(n.state);case 5:e.next=9;break;case 7:return e.next=9,a(n.state);case 9:r(),n.setState(U),n.props.onSubmit&&n.props.onSubmit(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),n.props.user.showError(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])}))),n.state=e.data||U,n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(r.a)(i.a.mark((function e(){var t,a,n,r,s,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.doby,a=t.getSummits,n=t.getSeries,r=t.getFilesChallenge,s=t.getProducts,e.next=4,a();case 4:return e.next=6,n();case 6:return l=[{field:"catalog_id",op:"in",value:["pack","medal"]}],e.next=9,s(l);case 9:if(!this.state._id){e.next=14;break}return e.next=12,r(this.state,!0);case 12:c=e.sent,this.setState((function(e){return Object(u.a)({},c)}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0);case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.disabled,n=this.state,i=n.name,r=n.description,s=n.start,l=n.end,c=n.regEnd,o=n.regStart,d=n.summitsRef,u=n.packsRef,h=n.serieRef,p=n.medalRef,m=n.difficulty,v=n.key,k=n._img,_=n._imgDesktop,F=n._map,R=n._thumbnail,N=n._logo,D=n._badge,U=n._mapDark,z=n._mapFull,E=n._logoDark,L=n._mapFullTransparent,P=n._medalFront,W=n._medalBack,q=this.props.doby,I=q.summits,M=q.series,A=q.products;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(b.a,{onSubmit:this.handleSubmit,inline:!0,disabled:a,children:[Object(T.jsxs)(y.a,{container:!0,direction:"row",justify:"left",alignItems:"left",children:[Object(T.jsx)(y.a,{item:!0,xs:6,className:S()(t.pr10),children:Object(T.jsx)(g.a,{value:i,field:"name",onChange:this.handleChange,required:!0,disabled:a,fullWidth:!0})}),Object(T.jsx)(y.a,{item:!0,xs:3,className:S()(t.pr10),children:Object(T.jsx)(f.a,{value:s,field:"start",onChange:this.handleChange,required:!0})}),Object(T.jsx)(y.a,{item:!0,xs:3,className:S()(t.pr10),children:Object(T.jsx)(f.a,{value:l,field:"end",onChange:this.handleChange,required:!0})})]}),Object(T.jsxs)(y.a,{container:!0,direction:"row",justify:"left",alignItems:"left",children:[Object(T.jsx)(y.a,{item:!0,xs:2,className:S()(t.pr10),children:Object(T.jsx)(O.a,{value:v,field:"key",onChange:this.handleChange,min:0,step:1,fullWidth:!0})}),Object(T.jsx)(y.a,{item:!0,xs:2,className:S()(t.pr10),children:Object(T.jsx)(O.a,{value:m,field:"difficulty",onChange:this.handleChange,min:0,max:5,step:1,required:!0,fullWidth:!0})}),Object(T.jsx)(y.a,{item:!0,xs:4,className:S()(t.pr10),children:Object(T.jsx)(j.a,{value:h?h.id:null,field:"serieRef",onChange:this.handleChangeRef,data:M.data,textField:"name",required:!0,idField:"id",disabled:a,fullWidth:!0})}),Object(T.jsx)(y.a,{item:!0,xs:4,className:S()(t.pr10),children:Object(T.jsx)(j.a,{value:d?d.map((function(e){return e.id})):[],field:"summitsRef",onChange:this.handleChangeSummitsRef,fullWidth:!0,data:I.data,textField:"name",required:!0,multiple:!0,idField:"id",disabled:a})})]}),Object(T.jsxs)(y.a,{container:!0,direction:"row",justify:"left",alignItems:"left",children:[Object(T.jsx)(y.a,{item:!0,xs:6,className:S()(t.pr10),children:Object(T.jsx)(j.a,{value:u?u.map((function(e){return e.id})):[],field:"packsRef",onChange:this.handleChangePacksRef,fullWidth:!0,data:A.data.filter((function(e){return"pack"===e.catalog_id})),textField:"name",required:!0,multiple:!0,idField:"id",disabled:a})}),Object(T.jsx)(y.a,{item:!0,xs:3,className:S()(t.pr10),children:Object(T.jsx)(f.a,{value:o,field:"regStart",onChange:this.handleChange})}),Object(T.jsx)(y.a,{item:!0,xs:3,className:S()(t.pr10),children:Object(T.jsx)(f.a,{value:c,field:"regEnd",onChange:this.handleChange})})]}),Object(T.jsx)(y.a,{container:!0,direction:"row",justify:"left",alignItems:"left",children:Object(T.jsx)(y.a,{item:!0,xs:4,className:S()(t.pr10),children:Object(T.jsx)(j.a,{value:p?p.id:null,field:"medalRef",onChange:this.handleChangeRef,data:A.data.filter((function(e){return"medal"===e.catalog_id})),textField:"name",idField:"id",disabled:a,fullWidth:!0})})}),Object(T.jsx)(x.a,{mimeType:"image/jpeg",value:k,field:"_img",onChange:this.handleChangeFile,disabled:a,height:C.a.imageSize}),Object(T.jsx)(x.a,{mimeType:"image/jpeg",value:_,field:"_imgDesktop",onChange:this.handleChangeFile,disabled:a,height:C.a.imageSize}),Object(T.jsx)(x.a,{mimeType:"image/jpeg",value:R,field:"_thumbnail",onChange:this.handleChangeFile,disabled:a,height:C.a.thumbnailSize}),Object(T.jsx)(x.a,{mimeType:"image/png",value:N,field:"_logo",onChange:this.handleChangeFile,disabled:a}),Object(T.jsx)(x.a,{mimeType:"image/png",value:F,field:"_map",onChange:this.handleChangeFile,disabled:a}),Object(T.jsx)(x.a,{mimeType:"image/png",value:D,field:"_badge",onChange:this.handleChangeFile,disabled:a}),Object(T.jsx)(x.a,{mimeType:"image/png",value:E,field:"_logoDark",onChange:this.handleChangeFile,disabled:a}),Object(T.jsx)(x.a,{mimeType:"image/png",value:U,field:"_mapDark",onChange:this.handleChangeFile,disabled:a}),Object(T.jsx)(x.a,{mimeType:"image/jpeg",value:z,field:"_mapFull",onChange:this.handleChangeFile,disabled:a,height:C.a.imageSize}),Object(T.jsx)(x.a,{mimeType:"image/png",value:L,field:"_mapFullTransparent",onChange:this.handleChangeFile,disabled:a}),Object(T.jsx)(x.a,{mimeType:"image/png",value:P,field:"_medalFront",onChange:this.handleChangeFile,disabled:a}),Object(T.jsx)(x.a,{mimeType:"image/png",value:W,field:"_medalBack",onChange:this.handleChangeFile,disabled:a})]}),Object(T.jsx)(w.a,{field:"description",value:r,onChange:this.handleChange,height:C.a.imageSize,disabled:a,postFile:this.props.store.postFile})]})}}]),a}(p.a.Component);t.a=Object(D.a)(Object(m.withStyles)((function(e){return Object(u.a)(Object(u.a)({},Object(v.a)(e)),{},{nameTextInput:{display:"flex",flex:1},mr10:{"margin-right":"10px"},ml10:{"margin-left":"10px"},pr10:{"padding-right":"10px"},pl10:{"padding-left":"10px"}})})),F.a,R.a,N.a)(z)},612:function(e,t,a){"use strict";a.r(t);var n=a(4),i=a(2),r=a.n(i),s=a(7),l=a(5),c=a.n(l),o=a(72),d=a.n(o),u=a(527),h=a(3),p=a.n(h),m=a(6),g=a(19),j=a(20),b=a(21),f=a(22),x=a(506),O=a(503),v=a(9),C=a(17),k=a(28),y=a(31),w=a(12),_=a(0),S=[{field:"name",disablePadding:!0},{field:"description"},{field:"start",type:"date"},{field:"end",type:"date"},{field:"key",type:"num"},{field:"_id"}],F=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(g.a)(this,a),(n=t.call(this,e)).handleChangeClient=function(e,t){n.setState({clientId:t})},n.handleClose=function(){n.setState({isOpen:!1})},n.handleOpen=function(){n.setState({isOpen:!0})},n.handleChange=function(){var e=Object(m.a)(p.a.mark((function e(t,a,i,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.props.doby.getChallenges(t,i,a,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),n.props.user.showError(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a,n,i){return e.apply(this,arguments)}}(),n.handleDelete=function(){var e=Object(m.a)(p.a.mark((function e(t){var a,i,r,s,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.doby,i=a.challenges,r=a.deleteChallenge,s=a.refreshChallenges,e.prev=1,l=i.data.find((function(e){return e._id===t})),e.next=5,r(t,l);case 5:s(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n.props.user.showError(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),n.onEdit=function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({x:t,isOpen:!0});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.isDisabled=function(e){return!1},n.state={x:null,isOpen:!1},n}return Object(j.a)(a,[{key:"render",value:function(){var e=this.props.translate;return Object(_.jsxs)("div",{children:[Object(_.jsx)(x.a,{rows:S,data:"challenges",onChange:this.handleChange,onDelete:this.handleDelete,title:e("challenges_title"),onEdit:this.onEdit,store:Object(n.a)(Object(n.a)({},this.props.doby),this.props.store),filters:[],isDisabled:this.isDisabled,filename:"challenges"}),Object(_.jsx)(O.a,{title:e("challenge_title"),onClose:this.handleClose,isOpen:this.state.isOpen,children:Object(_.jsx)(u.a,{data:this.state.x,onSubmit:this.handleClose})})]})}}]),a}(r.a.Component),R=Object(v.a)(y.a,C.a,k.a,w.b)(F),N=a(11);t.default=Object(v.a)(Object(s.withStyles)((function(e){return Object(n.a)(Object(n.a)({},Object(N.a)(e)),{},{paper:{padding:e.spacing.unit}})})),k.a)((function(e){var t=e.classes;return Object(_.jsxs)(c.a,{container:!0,children:[Object(_.jsx)(c.a,{item:!0,xs:12,className:t.p2,children:Object(_.jsx)(d.a,{className:t.paper,children:Object(_.jsx)(u.a,{})})}),Object(_.jsx)(c.a,{item:!0,xs:12,className:t.p2,children:Object(_.jsx)(R,{})})]})}))}}]);